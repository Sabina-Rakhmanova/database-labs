CREATE TABLE wallets (
    wallet_id SERIAL PRIMARY KEY,
    owner_name VARCHAR(100),
    balance NUMERIC(12, 2) NOT NULL DEFAULT 0
);

CREATE TABLE purchases (
    purchase_id SERIAL PRIMARY KEY,
    customer_id INT,
    amount NUMERIC(12, 2),
    purchase_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE purchase_items (
    item_id SERIAL PRIMARY KEY,
    purchase_id INT REFERENCES purchases(purchase_id),
    product_id INT,
    quantity INT
);

CREATE TABLE stock (
    product_id SERIAL PRIMARY KEY,
    product_name VARCHAR(100),
    quantity INT NOT NULL
);

CREATE TABLE clients (
    client_id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    email VARCHAR(100)
);

CREATE TABLE products (
    product_id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    price NUMERIC(10,2)
);

CREATE TABLE logs (
    log_id SERIAL PRIMARY KEY,
    message TEXT,
    log_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE audit_log (
    log_id SERIAL PRIMARY KEY,
    action VARCHAR(100),
    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE client_preferences (
    pref_id SERIAL PRIMARY KEY,
    client_id INT REFERENCES clients(client_id),
    preferred_language VARCHAR(10)
);

INSERT INTO wallets (owner_name, balance) VALUES
('Alice', 1000.00),
('Bob', 500.00),
('Carol', 2000.00);

INSERT INTO stock (product_name, quantity) VALUES
('Laptop', 10),
('Mouse', 50),
('Keyboard', 30);

BEGIN;

SELECT balance FROM wallets WHERE wallet_id = 1;

UPDATE wallets SET balance = balance - 300 WHERE wallet_id = 1;
UPDATE wallets SET balance = balance + 300 WHERE wallet_id = 2;

COMMIT;

SELECT table_name
FROM information_schema.tables
WHERE table_schema = 'public'
AND table_type = 'BASE TABLE';

BEGIN
 balance 
---------
 1000.00
(1 row)

UPDATE 1
UPDATE 1
COMMIT
     table_name     
--------------------
 wallets
 purchases
 purchase_items
 stock
 products
 logs
 audit_log
 clients
 client_preferences
(9 rows)

